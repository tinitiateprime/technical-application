{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/developer/Downloads/Archive/frontend/pages/subject/%5Bsubject%5D.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport styles from \"./SubjectPage.module.css\"; // ✅ import css module\r\n\r\ninterface Topics {\r\n  [key: string]: string;\r\n}\r\n\r\nfunction normalizeRawUrl(url: string) {\r\n  return String(url).replace(\r\n    \"https://raw.github.com/\",\r\n    \"https://raw.githubusercontent.com/\"\r\n  );\r\n}\r\n\r\nexport default function SubjectPage() {\r\n  const router = useRouter();\r\n  const { subject } = router.query;\r\n\r\n  const subjectStr = Array.isArray(subject) ? subject[0] : subject;\r\n\r\n  const [topics, setTopics] = useState<Topics>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const cacheKey = subjectStr ? `md-cache-${subjectStr}` : \"\";\r\n\r\n  useEffect(() => {\r\n    if (!subjectStr) return;\r\n\r\n    localStorage.setItem(\"last-subject\", String(subjectStr));\r\n\r\n    if (cacheKey) {\r\n      const cached = localStorage.getItem(cacheKey);\r\n      if (cached) {\r\n        try {\r\n          setTopics(JSON.parse(cached));\r\n          setLoading(false);\r\n          return;\r\n        } catch {}\r\n      }\r\n    }\r\n\r\n    fetch(\"/data.json\")\r\n      .then((res) => res.json())\r\n      .then(async (data) => {\r\n        const subj = data.subjects?.[subjectStr];\r\n        if (!subj) throw new Error(\"Subject not found in data.json\");\r\n\r\n        const fetchedTopics: Topics = {};\r\n        for (const [topicName, url] of Object.entries<string>(subj)) {\r\n          try {\r\n            const u = normalizeRawUrl(url);\r\n            const r = await fetch(u);\r\n            if (!r.ok) continue;\r\n            fetchedTopics[topicName] = await r.text();\r\n          } catch (e) {\r\n            console.error(\"Fetch failed:\", topicName, e);\r\n          }\r\n        }\r\n\r\n        localStorage.setItem(cacheKey, JSON.stringify(fetchedTopics));\r\n        setTopics(fetchedTopics);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setError(err.message || \"Failed to load subject.\");\r\n        setLoading(false);\r\n      });\r\n  }, [subjectStr, cacheKey]);\r\n\r\n  const Header = () => (\r\n    <header className={styles.header}>\r\n      <div className={styles.brand}>\r\n        <img src=\"/favicon_new.png\" alt=\"Logo\" className={styles.logo} />\r\n        <div className={styles.brandText}>\r\n          <div className={styles.brandTitle}>{subjectStr || \"Learning\"}</div>\r\n          <div className={styles.brandSub}>Docs • Topics • Notes</div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n\r\n  if (loading || error) {\r\n    return (\r\n      <div className={styles.page}>\r\n        <Header />\r\n        <main className={styles.center}>\r\n          <div className={styles.centerCard}>\r\n            <div className={styles.centerTitle}>\r\n              {loading ? \"Loading topics...\" : \"Oops\"}\r\n            </div>\r\n            <div className={styles.centerMsg}>{error || \"Please wait…\"}</div>\r\n\r\n            {error ? (\r\n              <button className={styles.btn} onClick={() => router.push(\"/\")}>\r\n                Go Home\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        </main>\r\n\r\n        <footer className={styles.footer}>© 2026 My Learning Site</footer>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.page}>\r\n      <Header />\r\n\r\n      <main className={styles.shell}>\r\n        <div className={styles.grid}>\r\n          {Object.keys(topics).map((t, idx) => (\r\n            <button\r\n              key={t}\r\n              className={styles.card}\r\n              onClick={() =>\r\n                router.push(\r\n                  `/topic/${encodeURIComponent(t)}?subject=${encodeURIComponent(\r\n                    String(subjectStr)\r\n                  )}`\r\n                )\r\n              }\r\n            >\r\n              <div className={styles.cardTop}>\r\n                <span className={styles.index}>{idx + 1}</span>\r\n                <span className={styles.title}>{t}</span>\r\n              </div>\r\n\r\n              <p className={styles.preview}>\r\n                {(topics[t] || \"\").replace(/\\n/g, \" \").slice(0, 120)}...\r\n              </p>\r\n\r\n              <div className={styles.openRow}>\r\n                <span className={styles.openText}>Open</span>\r\n                <span className={styles.arrow}>→</span>\r\n              </div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </main>\r\n\r\n      <footer className={styles.footer}>\r\n        <span>© 2026 My Learning Site</span>\r\n        <span className={styles.footerDot}>•</span>\r\n        <span className={styles.footerMuted}>Built for fast learning</span>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}